(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"4ca8":function(e,t,a){"use strict";var o=a("75f1"),r=a.n(o);r.a},"75f1":function(e,t,a){},"7eaf":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[[a("div",[a("q-table",{class:e.is_mobile?"my-sticky-dynamic table-top-mobile":"my-sticky-dynamic",attrs:{title:"ROUTES",data:e.routeList,columns:e.columns,"row-key":"route_number",pagination:e.pagination,filter:e.filter,"binary-state-sort":""},on:{"update:pagination":function(t){e.pagination=t},request:e.getRoutes},scopedSlots:e._u([{key:"top-left",fn:function(){return[a("div",{staticClass:"items-center"},[a("q-btn",{staticStyle:{width:"168px",height:"40px"},attrs:{rounded:"",dense:"","no-caps":"",label:"+Add Route",color:"blue-7"},on:{click:function(t){return e.goToDetail()}}})],1)]},proxy:!0},{key:"top-right",fn:function(){return[a("q-input",{staticStyle:{width:"168px"},attrs:{dense:"",debounce:"300",placeholder:"Search","input-class":"text-white border-white",color:"blue-7"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search",color:"white"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"body",fn:function(t){return[a("q-tr",{attrs:{props:t},nativeOn:{click:function(a){return e.goToDetail(t.row)}}},[a("q-td",{key:"no",attrs:{props:t}},[e._v(e._s(t.row.index))]),a("q-td",{key:"route_number",attrs:{props:t}},[e._v(e._s(t.row.route_number))]),a("q-td",{key:"route_type",attrs:{props:t}},[e._v(e._s(t.row.route_type?"Extra Route":"Regular Route"))]),a("q-td",{key:"buttons",attrs:{props:t}},[a("q-btn",{attrs:{flat:"",icon:"fas fa-trash-alt"},on:{click:function(a){return e.remove(t.row)}},nativeOn:{click:function(e){e.stopPropagation()}}})],1)],1)]}},{key:"bottom",fn:function(t){return[a("div",{staticClass:"col-12 row justify-end items-center"},[e._v("\n            Total Records: "+e._s(e.pagination.rowsNumber)+"\n            "),a("q-btn",{attrs:{icon:"chevron_left",color:"grey-8",round:"",dense:"",flat:"",disable:t.isFirstPage},on:{click:t.prevPage}}),a("span",[e._v(e._s(t.pagination.page)+" / "+e._s(Math.ceil(t.pagination.rowsNumber/t.pagination.rowsPerPage)))]),a("q-btn",{attrs:{icon:"chevron_right",color:"grey-8",round:"",dense:"",flat:"",disable:t.isLastPage},on:{click:t.nextPage}})],1)]}}])})],1),a("q-dialog",{attrs:{persistent:"",maximized:!0,"transition-show":"scale","transition-hide":"scale"},model:{value:e.showDetail,callback:function(t){e.showDetail=t},expression:"showDetail"}},[a("q-card",{staticStyle:{"background-color":"#3E444E"}},[a("q-bar",{staticStyle:{"background-color":"#3E444E"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close",color:"white"}},[a("q-tooltip",{attrs:{"content-class":"bg-white text-black"}},[e._v("Close")])],1),a("div",{staticClass:"text-h6 text-white"},[e._v(e._s(e.dialogTitle))])],1),a("q-separator"),a("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"50vh"}},[a("q-form",{ref:"selectedNumber",staticStyle:{"max-width":"400px",margin:"auto"},attrs:{model:e.selectedNumber},on:{submit:e.onSubmit}},[a("div",{staticClass:"row justify-between q-col-gutter-md"},[a("div",{staticClass:"col-12"},[a("span",{staticClass:"text-white"},[e._v("Route")]),a("q-input",{attrs:{dense:"",outlined:"",required:"",label:"Number",color:"blue-7","bg-color":"white","input-class":"text-black text-center"},model:{value:e.selectedNumber.route_number,callback:function(t){e.$set(e.selectedNumber,"route_number",t)},expression:"selectedNumber.route_number"}}),a("q-separator",{staticClass:"q-my-md",attrs:{color:"grey-4"}}),a("span",{staticClass:"text-white"},[e._v("Type")]),a("q-select",{staticClass:"q-mb-xs",attrs:{dense:"",required:"",label:"Route",outlined:"",options:e.route_types,"option-value":function(e){return null===e?null:e.value},"option-label":function(e){return null===e?"- Null -":e.label},"emit-value":"","map-options":"",behavior:"menu",color:"blue-7","bg-color":"white","input-class":"text-black text-center"},model:{value:e.selectedNumber.route_type,callback:function(t){e.$set(e.selectedNumber,"route_type",t)},expression:"selectedNumber.route_type"}})],1)]),a("q-card-actions",{attrs:{align:"center"}},[e.isNewRecord?e._e():a("q-btn",{staticStyle:{width:"100px",height:"40px"},attrs:{"no-caps":"",dense:"",rounded:"",label:"Delete",color:"blue-7"},on:{click:e.remove}}),a("q-btn",{staticStyle:{width:"100px",height:"40px"},attrs:{label:e.isNewRecord?"Add":"Update",color:"blue-7","no-caps":"",dense:"",rounded:"",type:"submit"}})],1)],1)],1)],1)],1)]],2)},r=[],i=a("967e"),n=a.n(i),s=(a("96cf"),a("1e53")),l=a("f508"),c={name:"RouteList",data:function(){return{filter:"",showDetail:!1,pagination:{sortBy:"route_number",descending:!1,page:1,rowsPerPage:10,rowsNumber:20},route_types:[{label:"Regular Route",value:0},{label:"Extra Route",value:1}],columns:[{name:"no",required:!0,label:"NO",align:"left",field:"no"},{name:"route_number",required:!0,label:"ROUTE",align:"left",field:"route_number",sortable:!0},{name:"route_type",required:!0,label:"TYPE",align:"center",field:"route_type",sortable:!0},{name:"buttons",label:"",field:"buttons"}],routeList:[],selectedNumber:{route_number:"",route_type:""},dialogTitle:"",is_mobile:!1,isNewRecord:!0}},mounted:function(){this.checkPlatform(),this.$store.commit("auth/pageTitle",this.$router.currentRoute.meta.title),this.getRoutes({pagination:this.pagination,filter:void 0})},methods:{checkPlatform:function(){this.$q.platform.is.mobile?this.is_mobile=!0:this.is_mobile=!1},goToDetail:function(e){e?(this.isNewRecord=!1,this.dialogTitle="Edit Route",this.selectedNumber.id=e.id,this.selectedNumber.route_number=e.route_number,this.selectedNumber.route_type=e.route_type):(this.isNewRecord=!0,this.dialogTitle="Add Route",this.selectedNumber={route_number:"",route_type:""}),this.showDetail=!0},getRoutes:function(e){var t,a,o,r,i,c,u,d,p,b,h;return n.a.async((function(m){while(1)switch(m.prev=m.next){case 0:return t=e.pagination,a=t.page,o=t.rowsPerPage,r=t.rowsNumber,i=t.sortBy,c=t.descending,u=e.filter,d=0===o?r:o,p=(a-1)*o,b={conditions:{},start:p,numPerPage:d,sortBy:i,descending:c},u&&(b.conditions.filter=u),l["a"].show(),m.prev=7,m.next=10,n.a.awrap(s["a"].getRoutes(b));case 10:h=m.sent,l["a"].hide(),this.routeList=h.data.data,this.routeList.forEach((function(e,t){e.index=t+1})),this.pagination.rowsNumber=h.data.totalCount,this.pagination.page=a,this.pagination.rowsPerPage=o,this.pagination.sortBy=i,this.pagination.descending=c,m.next=25;break;case 21:m.prev=21,m.t0=m["catch"](7),l["a"].hide(),console.log("errorrrrrrrrrr",m.t0);case 25:case"end":return m.stop()}}),null,this,[[7,21]])},cancelDetail:function(){this.showDetail=!1,this.selectedNumber={}},onSubmit:function(){var e,t,a;return n.a.async((function(o){while(1)switch(o.prev=o.next){case 0:if(e={data:this.selectedNumber},!this.selectedNumber.id){o.next=19;break}return e.conditions={id:this.selectedNumber.id},l["a"].show(),o.prev=4,o.next=7,n.a.awrap(s["a"].updateRoute(e));case 7:t=o.sent,l["a"].hide(),console.log("result",t.data),o.next=16;break;case 12:o.prev=12,o.t0=o["catch"](4),l["a"].hide(),console.log("error",o.t0);case 16:this.cancelDetail(),o.next=33;break;case 19:return l["a"].show(),o.prev=20,o.next=23,n.a.awrap(s["a"].createRoute(e));case 23:a=o.sent,l["a"].hide(),console.log("result",a.data),o.next=32;break;case 28:o.prev=28,o.t1=o["catch"](20),l["a"].hide(),console.log("error",o.t1);case 32:this.cancelDetail();case 33:this.getRoutes({pagination:this.pagination,filter:void 0});case 34:case"end":return o.stop()}}),null,this,[[4,12],[20,28]])},remove:function(){var e=this;this.$q.dialog({title:"Confirm",message:"Are you surely remove "+this.selectedNumber.route_number+"?",cancel:!0,persistent:!0,color:"blue-7"}).onOk((function(){var t,a;return n.a.async((function(o){while(1)switch(o.prev=o.next){case 0:return t={conditions:{id:e.selectedNumber.id}},l["a"].show(),o.prev=2,o.next=5,n.a.awrap(s["a"].removeRoute(t));case 5:a=o.sent,l["a"].hide(),console.log("remove result",a),e.$q.notify({color:"positive",position:"top",message:e.selectedNumber.route_number+" is removed successfully !"}),e.cancelDetail(),e.getRoutes({pagination:e.pagination,filter:void 0}),o.next=16;break;case 13:o.prev=13,o.t0=o["catch"](2),l["a"].hide();case 16:case"end":return o.stop()}}),null,null,[[2,13]])})).onCancel((function(){})).onDismiss((function(){}))}},created:function(){}},u=c,d=(a("4ca8"),a("2877")),p=a("9989"),b=a("eaac"),h=a("9c40"),m=a("27f9"),f=a("0016"),g=a("bd08"),w=a("db86"),v=a("24e8"),y=a("f09f"),_=a("d847"),x=a("05c0"),k=a("eb85"),q=a("a370"),N=a("0378"),R=a("ddd8"),P=a("4b7e"),C=a("7f67"),S=a("eebe"),T=a.n(S),D=Object(d["a"])(u,o,r,!1,null,null,null);t["default"]=D.exports;T()(D,"components",{QPage:p["a"],QTable:b["a"],QBtn:h["a"],QInput:m["a"],QIcon:f["a"],QTr:g["a"],QTd:w["a"],QDialog:v["a"],QCard:y["a"],QBar:_["a"],QTooltip:x["a"],QSeparator:k["a"],QCardSection:q["a"],QForm:N["a"],QSelect:R["a"],QCardActions:P["a"]}),T()(D,"directives",{ClosePopup:C["a"]})}}]);