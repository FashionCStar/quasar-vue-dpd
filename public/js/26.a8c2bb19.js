(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[26],{8001:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("q-page",[[o("div",[o("q-table",{class:"ios"===e.is_mobile?"my-sticky-dynamic table-top-ios":"android"===e.is_mobile?"my-sticky-dynamic table-top-android":"my-sticky-dynamic",attrs:{title:"DEPOT LOCATIONS",data:e.depotList,columns:"admin"===e.userLevel?e.columns_admin:e.columns,"row-key":"depot_location",pagination:e.pagination,filter:e.filter,"binary-state-sort":"","virtual-scroll":"","virtual-scroll-item-size":48,"virtual-scroll-sticky-size-start":48,"rows-per-page-options":[0]},on:{"update:pagination":function(t){e.pagination=t},request:e.getDepots,"virtual-scroll":e.onScroll},scopedSlots:e._u([{key:"top-left",fn:function(){return[o("div",{staticClass:"items-center"},[o("q-btn",{staticStyle:{width:"168px",height:"40px"},attrs:{rounded:"",dense:"","no-caps":"",label:"+Add Depot",color:"blue-7"},on:{click:function(t){return e.goToDetail()}}})],1)]},proxy:!0},{key:"top-right",fn:function(){return[o("q-input",{staticClass:"q-mb-sm",staticStyle:{width:"168px"},attrs:{dense:"",debounce:"300",placeholder:"Search","input-class":"text-white border-white",color:"blue-7"},scopedSlots:e._u([{key:"append",fn:function(){return[o("q-icon",{attrs:{name:"search",color:"white"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"body",fn:function(t){return[o("q-tr",{attrs:{props:t},nativeOn:{click:function(o){return e.goToDetail(t.row)}}},[o("q-td",{key:"no",attrs:{props:t}},[e._v(e._s(t.row.index))]),o("q-td",{key:"depot_location",attrs:{props:t}},[e._v(e._s(t.row.depot_location))]),"admin"===e.userLevel?o("q-td",{key:"user_name",attrs:{props:t}},[e._v(e._s(t.row.user.full_name))]):e._e()],1)]}},{key:"bottom",fn:function(t){return[o("div",{staticClass:"col-12 row justify-end items-center"},[e._v("\n            Total Records: "+e._s(e.pagination.rowsNumber)+"\n            "),o("q-btn",{attrs:{icon:"chevron_left",color:"grey-8",round:"",dense:"",flat:"",disable:t.isFirstPage},on:{click:t.prevPage}}),o("span",[e._v(e._s(t.pagination.page)+" / "+e._s(Math.ceil(t.pagination.rowsNumber/t.pagination.rowsPerPage)))]),o("q-btn",{attrs:{icon:"chevron_right",color:"grey-8",round:"",dense:"",flat:"",disable:t.isLastPage},on:{click:t.nextPage}})],1)]}}])})],1),o("q-dialog",{attrs:{persistent:"","transition-show":"scale","transition-hide":"scale"},model:{value:e.showDetail,callback:function(t){e.showDetail=t},expression:"showDetail"}},[o("q-card",{staticStyle:{"background-color":"#3E444E","max-width":"500px","min-height":"500px"}},[o("q-bar",{staticStyle:{"background-color":"#272B33"}},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{dense:"",flat:"",icon:"close",color:"white"}},[o("q-tooltip",{attrs:{"content-class":"bg-white text-black"}},[e._v("Close")])],1),o("div",{staticClass:"text-h6 text-white"},[e._v(e._s(e.dialogTitle))])],1),o("q-separator"),o("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"50vh"}},[o("q-form",{ref:"selectedDepot",staticStyle:{width:"320px",margin:"auto"},attrs:{model:e.selectedDepot},on:{submit:e.onSubmit}},[o("div",{staticClass:"row justify-between q-col-gutter-md"},[o("div",{staticClass:"col-12"},[o("span",{staticClass:"text-white"},[e._v("Depot Location")]),o("q-input",{attrs:{dense:"",outlined:"",required:"",color:"blue-7","bg-color":"white","input-class":"text-black"},model:{value:e.selectedDepot.depot_location,callback:function(t){e.$set(e.selectedDepot,"depot_location",t)},expression:"selectedDepot.depot_location"}})],1)]),o("q-card-actions",{attrs:{align:"center"}},[e.isNewRecord?e._e():o("q-btn",{staticStyle:{width:"100px",height:"40px"},attrs:{"no-caps":"",dense:"",rounded:"",label:"Delete",color:"blue-7"},on:{click:e.remove}}),o("q-btn",{staticStyle:{width:"100px",height:"40px"},attrs:{label:e.isNewRecord?"Add":"Update",color:"blue-7","no-caps":"",dense:"",rounded:"",type:"submit"}})],1)],1)],1)],1)],1)]],2)},i=[],n=o("a34a"),s=o.n(n),r=(o("96cf"),o("c973")),l=o.n(r),c=o("1e53"),d=o("f508"),p={name:"DepotList",data:function(){return{filter:"",showDetail:!1,pagination:{sortBy:"depot_location",descending:!1,page:1,rowsPerPage:100,rowsNumber:20},columns:[{name:"no",required:!0,label:"NO",align:"left",field:"no"},{name:"depot_location",required:!0,label:"DEPOT Location",align:"left",field:"depot_location"}],columns_admin:[{name:"no",required:!0,label:"NO",align:"left",field:"no"},{name:"depot_location",required:!0,label:"DEPOT Location",align:"left",field:"depot_location"},{name:"user_name",required:!0,label:"USER",align:"left",field:"user_name"}],depotList:[],selectedDepot:{depot_location:""},dialogTitle:"",is_mobile:"web",isNewRecord:!0}},mounted:function(){this.checkPlatform(),this.$store.commit("auth/pageTitle",this.$router.currentRoute.meta.title),this.getDepots({pagination:this.pagination,filter:void 0})},computed:{userLevel:{get:function(){return this.$store.state.auth.userLevel}}},methods:{checkPlatform:function(){this.$q.platform.is.mobile?this.$q.platform.is.ios?this.is_mobile="ios":this.is_mobile="android":this.is_mobile="web"},goToDetail:function(e){e?(this.isNewRecord=!1,this.dialogTitle="Edit Depot Location",this.selectedDepot.id=e.id,this.selectedDepot.depot_location=e.depot_location):(this.isNewRecord=!0,this.dialogTitle="Add Depot Location",this.selectedDepot={depot_location:""}),this.showDetail=!0},onScroll:function(e){var t=this;return l()(s.a.mark((function o(){var a,i,n,r,l,c,d;return s.a.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(a=e.index,e.from,e.to,e.ref,i=t.pagination,n=i.page,r=i.rowsPerPage,l=i.rowsNumber,c=t.depotList.length-1,d=Math.ceil(l/r),!(a>0&&n<d&&a===c)){o.next=8;break}return t.pagination.page++,o.next=8,t.getDepots({pagination:t.pagination,filter:t.filter,isScroll:!0});case 8:case"end":return o.stop()}}),o)})))()},getDepots:function(){var e=l()(s.a.mark((function e(t){var o,a,i,n,r,l,p,u,h,g,f,m;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=t.pagination,a=o.page,i=o.rowsPerPage,n=o.rowsNumber,r=o.sortBy,l=o.descending,p=t.filter,u=t.isScroll,h=0===i?n:i,g=(a-1)*i,f={conditions:{},start:g,numPerPage:h,sortBy:r,descending:l},p&&(f.conditions.filter=p),d["a"].show(),e.prev=8,e.next=11,c["a"].getDepots(f);case 11:m=e.sent,d["a"].hide(),m.data.data.forEach((function(e,t){e.index=10*(a-1)+t+1})),this.depotList=u?this.depotList.concat(m.data.data):m.data.data,this.pagination.rowsNumber=m.data.totalCount,this.pagination.page=a,this.pagination.rowsPerPage=i,this.pagination.sortBy=r,this.pagination.descending=l,e.next=26;break;case 22:e.prev=22,e.t0=e["catch"](8),d["a"].hide(),console.log("errorrrrrrrrrr",e.t0);case 26:case"end":return e.stop()}}),e,this,[[8,22]])})));function t(t){return e.apply(this,arguments)}return t}(),cancelDetail:function(){this.showDetail=!1,this.selectedDepot={}},onSubmit:function(){var e=this;return l()(s.a.mark((function t(){var o,a,i;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o={data:e.selectedDepot},!e.selectedDepot.id){t.next=19;break}return o.conditions={id:e.selectedDepot.id},d["a"].show(),t.prev=4,t.next=7,c["a"].updateDepot(o);case 7:a=t.sent,d["a"].hide(),console.log("result",a.data),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](4),d["a"].hide(),console.log("error",t.t0);case 16:e.cancelDetail(),t.next=33;break;case 19:return d["a"].show(),t.prev=20,t.next=23,c["a"].createDepot(o);case 23:i=t.sent,d["a"].hide(),console.log("result",i.data),t.next=32;break;case 28:t.prev=28,t.t1=t["catch"](20),d["a"].hide(),console.log("error",t.t1);case 32:e.cancelDetail();case 33:e.getDepots({pagination:e.pagination,filter:void 0});case 34:case"end":return t.stop()}}),t,null,[[4,12],[20,28]])})))()},remove:function(){var e=this;this.$q.dialog({title:"Confirm",message:"Are you surely remove "+this.selectedDepot.depot_location+"?",cancel:!0,persistent:!0,color:"blue-7"}).onOk(l()(s.a.mark((function t(){var o,a;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o={conditions:{id:e.selectedDepot.id}},d["a"].show(),t.prev=2,t.next=5,c["a"].removeDepot(o);case 5:a=t.sent,d["a"].hide(),console.log("remove result",a),e.$q.notify({color:"positive",position:"top",message:e.selectedDepot.depot_location+" is removed successfully !"}),e.cancelDetail(),e.getDepots({pagination:e.pagination,filter:void 0}),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](2),d["a"].hide();case 16:case"end":return t.stop()}}),t,null,[[2,13]])})))).onCancel((function(){})).onDismiss((function(){}))}},created:function(){}},u=p,h=o("2877"),g=o("9989"),f=o("eaac"),m=o("9c40"),b=o("27f9"),w=o("0016"),v=o("bd08"),_=o("db86"),D=o("24e8"),y=o("f09f"),x=o("d847"),k=o("05c0"),q=o("eb85"),P=o("a370"),S=o("0378"),C=o("4b7e"),L=o("7f67"),T=o("eebe"),N=o.n(T),Q=Object(h["a"])(u,a,i,!1,null,null,null);t["default"]=Q.exports;N()(Q,"components",{QPage:g["a"],QTable:f["a"],QBtn:m["a"],QInput:b["a"],QIcon:w["a"],QTr:v["a"],QTd:_["a"],QDialog:D["a"],QCard:y["a"],QBar:x["a"],QTooltip:k["a"],QSeparator:q["a"],QCardSection:P["a"],QForm:S["a"],QCardActions:C["a"]}),N()(Q,"directives",{ClosePopup:L["a"]})}}]);