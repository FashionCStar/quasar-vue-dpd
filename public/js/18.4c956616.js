(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[18],{"6d33":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("q-page",{staticClass:"q-mt-none",staticStyle:{"background-color":"#3e444e"}},[[r("div",[r("div"),r("div",{staticClass:"q-px-md",staticStyle:{"background-color":"#3e444e"}},[r("div",{staticClass:"q-py-sm"},[r("div",{staticClass:"q-mx-auto",staticStyle:{"max-width":"400px",position:"relative"}},[r("div",{staticStyle:{display:"flex","align-items":"center"}},[r("q-input",{staticStyle:{width:"90%"},attrs:{dense:"",debounce:"300",placeholder:"Enter PostCode","input-class":"text-white border-white",color:"blue-7"},scopedSlots:t._u([{key:"append",fn:function(){return[r("q-btn",{attrs:{icon:"search",color:"grey"},on:{click:function(e){return t.searchLocator(t.filter)}}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}}),r("q-btn",{staticClass:"q-ml-xs",staticStyle:{width:"36px",height:"36px"},attrs:{icon:"close",size:"12px",color:"grey"},on:{click:function(e){return t.clearMarkers()}}})],1),t.locations.length?r("div",{staticClass:"text-right bg-white",staticStyle:{width:"100%",position:"absolute","z-index":"999"}},[r("q-scroll-area",{staticStyle:{height:"calc(100vh - 200px)","max-height":"600px"}},[r("q-btn",{staticClass:"q-mr-sm",attrs:{round:"",size:"6px",icon:"close",color:"red"},on:{click:t.resetLocations}}),r("q-list",{staticClass:"text-left",attrs:{separator:""}},t._l(t.locations,(function(e){return r("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.name,attrs:{dense:"",clickable:""},on:{click:function(n){return t.showMarker(e)}}},[r("q-item-section",[t._v(t._s(e.name))])],1)})),1)],1)],1):t._e()])]),r("gmap-map",{staticStyle:{width:"100%",height:"calc(100vh - 120px)"},attrs:{center:t.center,zoom:12,id:"map"}},[r("gmap-marker",{attrs:{position:t.mylocation,icon:{url:n("8952"),size:{width:30,height:30,f:"px",b:"px"},scaledSize:{width:30,height:30,f:"px",b:"px"}}},on:{click:function(e){return t.moveCenter(t.mylocation)}}}),t._l(t.markers,(function(e,n){return r("gmap-marker",{key:n,attrs:{position:e.position,label:e.label},on:{click:function(n){return t.moveCenter(e.position)}}})}))],2)],1)])]],2)},a=[],o=(n("6b54"),n("28a5"),n("551c"),n("ac6a"),n("cadf"),n("06db"),n("5df3"),n("a34a")),i=n.n(o),s=(n("96cf"),n("c973")),c=n.n(s),l=n("1e53"),u=n("02cc"),h=n.n(u),p=n("755e"),m={name:"LOCATORSEARCH",components:{},data:function(){return{filter:"",zoom:5,center:{},markers:[],locations:[],mylocation:{}}},computed:{google:p["gmapApi"]},created:function(){var t=this;return c()(i.a.mark((function e(){return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$store.commit("auth/pageTitle",t.$router.currentRoute.meta.title),t.getCurrentPosition();case 2:case"end":return e.stop()}}),e)})))()},methods:{moveCenter:function(t){var e=this;return c()(i.a.mark((function n(){return i.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.center=t,e.zoom=10;case 2:case"end":return n.stop()}}),n)})))()},getLatLng:function(t){return c()(i.a.mark((function e(){var n;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l["a"].convertbng2latlong(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})))()},searchLocator:function(t){var e=this;return c()(i.a.mark((function n(){var r,a,o;return i.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t){n.next=11;break}return e.locations=[],r={searchterm:t},n.next=5,l["a"].getLocatorResults(r);case 5:return a=n.sent,o=h.a.load(a.data),n.next=9,Promise.all(o("a").map(function(){var t=c()(i.a.mark((function t(e,n){var r,a,s,c;return i.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=o(this).attr("coords_1").split(",")[0].split(" "),a={northing:Math.round(r[0]),easting:Math.round(r[1])},t.next=4,l["a"].convertbng2latlong(a);case 4:return s=t.sent,c={name:o(this).text(),type:o(this).attr("category"),lat:s.data.latitude,lng:s.data.longitude},t.abrupt("return",c);case 7:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()));case 9:e.locations=n.sent,e.zoom=5;case 11:case"end":return n.stop()}}),n)})))()},resetLocations:function(){this.locations=[],this.zoom=5},containsMarker:function(t){for(var e=0;e<this.markers.length;e++)if(this.markers[e].position.lat===t.lat&&this.markers[e].position.lng===t.lng)return!0;return!1},showMarker:function(t){if(this.center={lat:t.lat,lng:t.lng},this.zoom=10,!this.containsMarker(this.center)){var e={position:{lat:t.lat,lng:t.lng},label:(this.markers.length+1).toString()};this.markers.push(e)}this.locations=[]},getCurrentPosition:function(){var t=this;navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){var n={lat:Math.round(e.coords.latitude),lng:Math.round(e.coords.longitude)};t.mylocation=n,t.center=n}),(function(){t.handleLocationError(!0,t.mylocation)})):this.handleLocationError(!1,this.mylocation)},handleLocationError:function(t,e){console.log("error location")},clearMarkers:function(){this.markers=[],this.center=this.mylocation,this.filter=""}}},d=m,f=n("2877"),g=n("9989"),v=n("d847"),k=n("9c40"),x=n("27f9"),w=n("4983"),b=n("1c1c"),y=n("66e5"),C=n("4074"),q=n("714f"),S=n("eebe"),L=n.n(S),z=Object(f["a"])(d,r,a,!1,null,null,null);e["default"]=z.exports;L()(z,"components",{QPage:g["a"],QBar:v["a"],QBtn:k["a"],QInput:x["a"],QScrollArea:w["a"],QList:b["a"],QItem:y["a"],QItemSection:C["a"]}),L()(z,"directives",{Ripple:q["a"]})},8952:function(t,e,n){t.exports=n.p+"img/my-location-marker.f94eb882.png"}}]);